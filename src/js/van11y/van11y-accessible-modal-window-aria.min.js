"use strict";!function(t){var e="js-modal",a="data-modal-background-click",d="data-modal-prefix-class",n="data-modal-text",o="data-modal-content-id",l="data-modal-describedby-id",i="data-modal-title",r="data-modal-focus-toid",s="data-modal-close-text",c="js-modal-close",u="js-modal-close",b="data-content-back-id",m="data-focus-back",f="js-modal-content",g="modal-title",A="js-modal-page",v="js-modal",p="js-modal-overlay",y="Close modal",h="data-background-click",C="mc-no-scroll",k="aria-hidden",E=function e(a){return t.getElementById(a)},$=function t(e,a){e.classList?e.classList.add(a):e.className+=" "+a},x=function t(e,a){e.classList?e.classList.remove(a):e.className=e.className.replace(RegExp("(^|\\b)"+a.split(" ").join("|")+"(\\b|$)","gi")," ")},j=function t(e,a){return e.classList?e.classList.contains(a):RegExp("(^| )"+a+"( |$)","gi").test(e.className)};function I(t){t.parentNode.removeChild(t)}var L=function t(e,a){for(var d=!1,n=e.parentNode;n&&!1===d;)!0===j(n,a)?d=!0:n=n.parentNode;return!0===d?n.getAttribute("id"):""},B=function t(e){var a,d=e.text||y;return'<span\n                    id="'+p+'"\n                    class="'+(e.prefixClass+"modal-overlay")+'"\n                    '+h+'="'+("disabled"===e.backgroundEnabled?"disabled":"enabled")+'"\n                    title="'+d+'"\n                    >\n                    <span class="invisible">'+d+"</span>\n                  </span>"},T=function t(e){var a=document.createElement("dialog"),d=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div");o.setAttribute("id",f);var l=e.modalPrefixClass+"modal",i=e.modalPrefixClass+"modal__wrapper",r=e.modalPrefixClass+"modal-close",s='<span class="'+e.modalPrefixClass+'modal-close__text">\n                                          '+e.modalCloseText+"\n                                         </span>",A=e.modalPrefixClass+"modal__content",p=e.modalPrefixClass+"modal-title",y=""!==e.modalTitle?'<div class="js-modal-title-container"><h1 id="'+g+'" class="'+p+'">\n                                          '+e.modalTitle+"\n                                         </h1></div>":"",h='<button type="button" class="'+u+" "+r+'" id="'+c+'" '+b+'="'+e.modalContentId+'" '+m+'="'+e.modalFocusBackId+'"><span class="dashicons dashicons-no" aria-hidden="true"></span>\n                               '+s+"\n                              </button>",C=e.modalText;if(""===C&&e.modalContentId){var k=E(e.modalContentId);k&&o.insertAdjacentElement("beforeEnd",k)}else o.insertAdjacentHTML("beforeEnd",C);return a.setAttribute("id",v),a.classList.add(l),a.setAttribute("role","dialog"),a.setAttribute("aria-describedby",e.modalDescribedById+" open"),a.setAttribute("aria-labelledby",g),d.setAttribute("role","document"),d.classList.add(i),d.insertAdjacentHTML("afterBegin",h),n.classList.add(A),n.insertAdjacentHTML("afterBegin",y),n.insertAdjacentElement("beforeEnd",o),d.insertAdjacentElement("afterBegin",n),a.insertAdjacentElement("afterBegin",d),a},_=function t(e){if(""!==e.modalFocusBackId){var a=E(e.modalFocusBackId).closest("article");a&&a.insertAdjacentElement("beforeEnd",e.modalContent)}if(I(e.modal),I(e.overlay),e.modalFocusBackId){var d=E(e.modalFocusBackId);d&&d.focus()}},D=function a(){var d=arguments.length<=0||void 0===arguments[0]?t:arguments[0];return[].slice.call(d.querySelectorAll("."+e))},F=function g(I){var F=arguments.length<=1||void 0===arguments[1]||arguments[1];D(I).forEach(function(e){var a=Math.random().toString(32).slice(2,12),d=E(A),n=t.querySelector("body");if(e.setAttribute("id","label_modal_"+a),e.setAttribute("aria-haspopup","dialog"),null===d||0===d.length){var o=t.createElement("DIV");o.setAttribute("id",A),function t(e,a){for("string"==typeof a&&(a=document.createElement(a)),e.appendChild(a);e.firstChild!==a;)a.appendChild(e.firstChild)}(n,o),d=o}}),F&&["click","keydown"].forEach(function(g){t.body.addEventListener(g,function(I){var D=L(I.target,e);if((!0===j(I.target,e)||""!==D)&&"click"===g){var F=t.querySelector("body"),M=""!==D?E(D):I.target,N=!0===M.hasAttribute(d)?M.getAttribute(d)+"-":"",P=!0===M.hasAttribute(n)?M.getAttribute(n):"",S=!0===M.hasAttribute(o)?M.getAttribute(o):"",q=!0===M.hasAttribute(l)?M.getAttribute(l):"",H=!0===M.hasAttribute(i)?M.getAttribute(i):"",w=!0===M.hasAttribute(s)?M.getAttribute(s):y,O=!0===M.hasAttribute(a)?M.getAttribute(a):"",K=!0===M.hasAttribute(r)?M.getAttribute(r):"",V=E(A);F.insertAdjacentHTML("beforeEnd",B({text:w,backgroundEnabled:O,prefixClass:N})),F.insertAdjacentElement("beforeEnd",T({modalText:P,modalPrefixClass:N,backgroundEnabled:S,modalTitle:H,modalCloseText:w,modalCloseTitle:w,modalContentId:S,modalDescribedById:q,modalFocusBackId:M.getAttribute("id")})),V.setAttribute(k,"true"),$(F,C);var W=E(c);if(""!==K){var z=E(K);z?z.focus():W.focus()}else W.focus();I.preventDefault()}var G=L(I.target,u);if((I.target.getAttribute("id")===c||""!==G||I.target.getAttribute("id")===p||!0===j(I.target,u))&&"click"===g){var F=t.querySelector("body"),V=E(A),J=E(v),Q=E(f)?E(f):"",R=E(p),U=E(c),X=U.getAttribute(m),Y=U.getAttribute(b),O=R.getAttribute(h);I.target.getAttribute("id")===p&&"disabled"===O||(_({modal:J,modalContent:Q,overlay:R,modalFocusBackId:X,contentBackId:Y,backgroundEnabled:O,fromId:I.target.getAttribute("id")}),V.removeAttribute(k),x(F,C))}if(E(v)&&"keydown"===g){var F=t.querySelector("body"),V=E(A),J=E(v),Q=E(f)?E(f).innerHTML:"",R=E(p),U=E(c),X=U.getAttribute(m),Y=U.getAttribute(b),Z=[].slice.call(J.querySelectorAll("a[href], area[href], input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]"));27===I.keyCode&&(_({modal:J,modalContent:Q,overlay:R,modalFocusBackId:X,contentBackId:Y}),V.removeAttribute(k),x(F,C)),9===I.keyCode&&Z.indexOf(I.target)>=0&&(I.shiftKey?I.target===Z[0]&&(Z[Z.length-1].focus(),I.preventDefault()):I.target===Z[Z.length-1]&&(Z[0].focus(),I.preventDefault())),9===I.keyCode&&-1===Z.indexOf(I.target)&&(I.preventDefault(),Z[0].focus())}},!0)})},M=function t(){F(),document.removeEventListener("DOMContentLoaded",t)};document.addEventListener("DOMContentLoaded",M),window.van11yAccessibleModalWindowAria=F}(document);