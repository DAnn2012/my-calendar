(()=>{p();window.customElements.whenDefined("duet-date-picker").then(()=>{elem=document.querySelectorAll(".duet-fallback"),elem.forEach(o=>{o.parentNode.removeChild(o)})});function p(){Array.prototype.slice.apply(document.querySelectorAll("duet-date-picker")).forEach(n=>{let l=/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,t;n.dateAdapter={parse(e="",a){let i=e.match(l);if(i)return a(i[3],i[1],i[2])},format(e){switch(duetFormats.date){case"Y-m-d":return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`;case"m/d/Y":return`${e.getMonth()+1}/${e.getDate()}/${e.getFullYear()}`;case"d-m-Y":return`${e.getDate()}-${e.getMonth()+1}-${e.getFullYear()}`;case"j F Y":return t=Intl.DateTimeFormat("en-US",{month:"long"}).format(e),`${e.getDate()} ${t} ${e.getFullYear()}`;case"M j, Y":return t=Intl.DateTimeFormat("en-US",{month:"short"}).format(e),`${e.getDate()} ${t}, ${e.getFullYear()}`;default:return`${e.getFullYear()}/${e.getMonth()+1}/${e.getDate()}`}}},n.localization=duetLocalization});let u=document.querySelector("duet-date-picker[identifier=mc_event_date]"),c=document.querySelector("duet-date-picker[identifier=r_begin]"),s=document.querySelector("duet-date-picker[identifier=mc_event_enddate]"),d=document.querySelector('input[name="event_end[]"]'),f=document.querySelector('input[name="event_begin[]"]'),r=document.querySelector(".disable-recurrences");u!==null&&(c!==null&&c.addEventListener("duetChange",function(n){let l=n.detail.value,t=d.value,e=document.querySelector('input[name="recur_end[]"').value,a=document.querySelector('[identifier="r_end"]');e!==""&&l>e&&(a.value=n.detail.value),v(t,l)}),u.addEventListener("duetChange",function(n){let l=n.detail.value,t=d.value;if((t==""||l>t)&&(s.value=n.detail.value,t=n.detail.value),r!==null){let e=r.querySelector("fieldset"),a=r.querySelector(".dashicons"),i=r.querySelectorAll("fieldset input, fieldset select, fieldset duet-date-picker");e.setAttribute("style",""),r.querySelector(".enable-repetition").setAttribute("aria-expanded","true"),a.classList.add("dashicons-arrow-down"),a.classList.remove("dashicons-arrow-right"),i.forEach(m=>{m.disabled=!1})}v(t,l)}),s.addEventListener("duetChange",function(n){let l=n.detail.value,t=f.value;if(r!==null){let e=r.querySelector("fieldset"),a=r.querySelector(".dashicons"),i=r.querySelectorAll("fieldset input, fieldset select, fieldset duet-date-picker");e.setAttribute("style",""),r.querySelector(".enable-repetition").setAttribute("aria-expanded","true"),a.classList.add("dashicons-arrow-down"),a.classList.remove("dashicons-arrow-right"),i.forEach(m=>{m.disabled=!1})}v(l,t)}))}function v(o,u){let c=document.querySelector("#event_date_error"),s=document.querySelector("#my-calendar .button-primary"),d=document.querySelectorAll("#e_recur option");if(!(o&&u))return;let f=new Date(o),r=new Date(u),n=(f-r)/1e3;d&&d.forEach(l=>{l.getAttribute("data-period")<n?l.setAttribute("disabled","true"):l.removeAttribute("disabled")}),new Date(f)<r?(c.classList.add("visible"),s.disabled=!0):(c.classList.remove("visible"),s.disabled=!1)}})();
